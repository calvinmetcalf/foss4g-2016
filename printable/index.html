<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' content='text/html; charset=utf-8' />
  <title></title>
  <style>body{margin:0}img{max-width:100%}svg{max-height:100%}fieldset,input,select,textarea{font-family:inherit;font-size:1rem;box-sizing:border-box;margin-top:0;margin-bottom:0}label{vertical-align:middle}input[type=date],input[type=datetime-local],input[type=datetime],input[type=email],input[type=month],input[type=number],input[type=password],input[type=search],input[type=tel],input[type=text],input[type=time],input[type=url],input[type=week]{height:2.25rem;padding:.5rem .5rem;vertical-align:middle;-webkit-appearance:none}select{line-height:1.75;padding:.5rem .5rem}select:not([multiple]){height:2.25rem;vertical-align:middle}textarea{line-height:1.75;padding:.5rem .5rem}table{border-collapse:separate;border-spacing:0;max-width:100%;width:100%}th{text-align:left;font-weight:700}td,th{padding:.25rem 1rem;line-height:inherit}th{vertical-align:bottom}td{vertical-align:top}body{font-family:'Helvetica Neue',Helvetica,sans-serif;line-height:1.5;font-size:100%}h1,h2,h3,h4,h5,h6{font-family:'Helvetica Neue',Helvetica,sans-serif;font-weight:700;line-height:1.25;margin-top:1em;margin-bottom:.5em}p{margin-top:0;margin-bottom:1rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}code,pre,samp{font-family:'Source Code Pro',Consolas,monospace;font-size:inherit}pre{margin-top:0;margin-bottom:1rem;overflow-x:scroll}h1{font-size:2rem}h2{font-size:1.5rem}h3{font-size:1.25rem}h4{font-size:1rem}h5{font-size:.875rem}h6{font-size:.75rem}body{color:#111;background-color:#fff}a{color:#0074d9;text-decoration:none}a:hover{text-decoration:underline}code,pre{background-color:transparent;border-radius:3px}hr{border:0;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.125)}.field{border-style:solid;border-width:1px;border-color:rgba(0,0,0,.125);border-radius:3px}.field.is-focused,.field:focus{outline:0;border-color:#0074d9;box-shadow:0 0 0 2px rgba(0,116,217,.5)}.field.is-disabled,.field:disabled{background-color:rgba(0,0,0,.125);opacity:.5}.field.is-read-only,.field:read-only:not(select){background-color:rgba(0,0,0,.125)}.field.is-success{border-color:#2ecc40}.field.is-success.is-focused,.field.is-success:focus{box-shadow:0 0 0 2px rgba(46,204,64,.5)}.field.is-warning{border-color:#ffdc00}.field.is-warning.is-focused,.field.is-warning:focus{box-shadow:0 0 0 2px rgba(255,220,0,.5)}.field.is-error,.field:invalid{border-color:#ff4136}.field.is-error.is-focused,.field.is-error:focus,.field:invalid.is-focused,.field:invalid:focus{box-shadow:0 0 0 2px rgba(255,65,54,.5)}.table-light td,.table-light th{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgba(0,0,0,.125)}.table-light tr:last-child td{border-bottom:0}.btn{font-family:inherit;font-size:inherit;font-weight:700;text-decoration:none;cursor:pointer;display:inline-block;line-height:1.125rem;padding:.5rem 1rem;margin:0;height:auto;border:1px solid transparent;vertical-align:middle;-webkit-appearance:none;color:inherit;background-color:transparent}.btn:hover{text-decoration:none}.btn:focus{outline:0;border-color:rgba(0,0,0,.125);box-shadow:0 0 0 3px rgba(0,0,0,.25)}::-moz-focus-inner{border:0;padding:0}.btn-primary{color:#fff;background-color:#0074d9;border-radius:3px}.btn-primary:hover{box-shadow:inset 0 0 0 20rem rgba(0,0,0,.0625)}.btn-primary:active{box-shadow:inset 0 0 0 20rem rgba(0,0,0,.125),inset 0 3px 4px 0 rgba(0,0,0,.25),0 0 1px rgba(0,0,0,.125)}.btn-primary.is-disabled,.btn-primary:disabled{opacity:.5}.btn-outline,.btn-outline:hover{border-color:currentcolor}.btn-outline{border-radius:3px}.btn-outline:hover{box-shadow:inset 0 0 0 20rem rgba(0,0,0,.0625)}.btn-outline:active{box-shadow:inset 0 0 0 20rem rgba(0,0,0,.125),inset 0 3px 4px 0 rgba(0,0,0,.25),0 0 1px rgba(0,0,0,.125)}.btn-outline.is-disabled,.btn-outline:disabled{opacity:.5}.h1{font-size:2rem}.h2{font-size:1.5rem}.h3{font-size:1.25rem}.h4{font-size:1rem}.h5{font-size:.875rem}.h6{font-size:.75rem}.bold{font-weight:700}.regular{font-weight:400}.italic{font-style:italic}.caps{text-transform:uppercase;letter-spacing:.2em}.left-align{text-align:left}.center{text-align:center}.right-align{text-align:right}.justify{text-align:justify}.nowrap{white-space:nowrap}.break-word{word-wrap:break-word}.truncate{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list-reset{list-style:none;padding-left:0}.inline{display:inline}.block{display:block}.inline-block{display:inline-block}.table{display:table}.table-cell{display:table-cell}.overflow-hidden{overflow:hidden}.overflow-scroll{overflow:scroll}.overflow-auto{overflow:auto}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.left{float:left}.right{float:right}.fit{max-width:100%}.border-box{box-sizing:border-box}.align-baseline{vertical-align:baseline}.align-top{vertical-align:top}.align-middle{vertical-align:middle}.align-bottom{vertical-align:bottom}.m0{margin:0}.mt0{margin-top:0}.mr0{margin-right:0}.mb0{margin-bottom:0}.ml0{margin-left:0}.m1{margin:.5rem}.mt1{margin-top:.5rem}.mr1{margin-right:.5rem}.mb1{margin-bottom:.5rem}.ml1{margin-left:.5rem}.m2{margin:1rem}.mt2{margin-top:1rem}.mr2{margin-right:1rem}.mb2{margin-bottom:1rem}.ml2{margin-left:1rem}.m3{margin:2rem}.mt3{margin-top:2rem}.mr3{margin-right:2rem}.mb3{margin-bottom:2rem}.ml3{margin-left:2rem}.m4{margin:4rem}.mt4{margin-top:4rem}.mr4{margin-right:4rem}.mb4{margin-bottom:4rem}.ml4{margin-left:4rem}.mxn1{margin-left:-.5rem;margin-right:-.5rem}.mxn2{margin-left:-1rem;margin-right:-1rem}.mxn3{margin-left:-2rem;margin-right:-2rem}.mxn4{margin-left:-4rem;margin-right:-4rem}.mx-auto{margin-left:auto;margin-right:auto}.p0{padding:0}.p1{padding:.5rem}.py1{padding-top:.5rem;padding-bottom:.5rem}.px1{padding-left:.5rem;padding-right:.5rem}.p2{padding:1rem}.py2{padding-top:1rem;padding-bottom:1rem}.px2{padding-left:1rem;padding-right:1rem}.p3{padding:2rem}.py3{padding-top:2rem;padding-bottom:2rem}.px3{padding-left:2rem;padding-right:2rem}.p4{padding:4rem}.py4{padding-top:4rem;padding-bottom:4rem}.px4{padding-left:4rem;padding-right:4rem}.relative{position:relative}.absolute{position:absolute}.fixed{position:fixed}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.z1{z-index:1}.z2{z-index:2}.z3{z-index:3}.z4{z-index:4}.lg-show,.md-show,.sm-show{display:none!important}@media (min-width:40em){.sm-show{display:block!important}}@media (min-width:52em){.md-show{display:block!important}}@media (min-width:64em){.lg-show{display:block!important}}@media (min-width:40em){.sm-hide{display:none!important}}@media (min-width:52em){.md-hide{display:none!important}}@media (min-width:64em){.lg-hide{display:none!important}}.display-none{display:none!important}.hide{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}.container{max-width:64em;margin-left:auto;margin-right:auto}.col{float:left;box-sizing:border-box}.col-right{float:right;box-sizing:border-box}.col-1{width:8.33333%}.col-2{width:16.66667%}.col-3{width:25%}.col-4{width:33.33333%}.col-5{width:41.66667%}.col-6{width:50%}.col-7{width:58.33333%}.col-8{width:66.66667%}.col-9{width:75%}.col-10{width:83.33333%}.col-11{width:91.66667%}.col-12{width:100%}@media (min-width:40em){.sm-col{float:left;box-sizing:border-box}.sm-col-right{float:right;box-sizing:border-box}.sm-col-1{width:8.33333%}.sm-col-2{width:16.66667%}.sm-col-3{width:25%}.sm-col-4{width:33.33333%}.sm-col-5{width:41.66667%}.sm-col-6{width:50%}.sm-col-7{width:58.33333%}.sm-col-8{width:66.66667%}.sm-col-9{width:75%}.sm-col-10{width:83.33333%}.sm-col-11{width:91.66667%}.sm-col-12{width:100%}}@media (min-width:52em){.md-col{float:left;box-sizing:border-box}.md-col-right{float:right;box-sizing:border-box}.md-col-1{width:8.33333%}.md-col-2{width:16.66667%}.md-col-3{width:25%}.md-col-4{width:33.33333%}.md-col-5{width:41.66667%}.md-col-6{width:50%}.md-col-7{width:58.33333%}.md-col-8{width:66.66667%}.md-col-9{width:75%}.md-col-10{width:83.33333%}.md-col-11{width:91.66667%}.md-col-12{width:100%}}@media (min-width:64em){.lg-col{float:left;box-sizing:border-box}.lg-col-right{float:right;box-sizing:border-box}.lg-col-1{width:8.33333%}.lg-col-2{width:16.66667%}.lg-col-3{width:25%}.lg-col-4{width:33.33333%}.lg-col-5{width:41.66667%}.lg-col-6{width:50%}.lg-col-7{width:58.33333%}.lg-col-8{width:66.66667%}.lg-col-9{width:75%}.lg-col-10{width:83.33333%}.lg-col-11{width:91.66667%}.lg-col-12{width:100%}}.flex{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.flex-wrap{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-center{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.flex-baseline{-webkit-box-align:baseline;-webkit-align-items:baseline;-ms-flex-align:baseline;align-items:baseline}.flex-stretch{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}.flex-start{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}.flex-end{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end}.flex-justify{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.flex-auto{-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;min-height:0}.flex-grow{-webkit-box-flex:1;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto}.flex-none{-webkit-box-flex:0;-webkit-flex:none;-ms-flex:none;flex:none}.flex-first{-webkit-box-ordinal-group:0;-webkit-order:-1;-ms-flex-order:-1;order:-1}.flex-last{-webkit-box-ordinal-group:100000;-webkit-order:99999;-ms-flex-order:99999;order:99999}@media (min-width:40em){.sm-flex{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}}@media (min-width:52em){.md-flex{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}}@media (min-width:64em){.lg-flex{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}}.border{border-style:solid;border-width:1px;border-color:rgba(0,0,0,.125)}.border-top{border-top-style:solid;border-top-width:1px;border-top-color:rgba(0,0,0,.125)}.border-right{border-right-style:solid;border-right-width:1px;border-right-color:rgba(0,0,0,.125)}.border-bottom{border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.125)}.border-left{border-left-style:solid;border-left-width:1px;border-left-color:rgba(0,0,0,.125)}.border-none{border:0}.rounded{border-radius:3px}.circle{border-radius:50%}.rounded-top{border-radius:3px 3px 0 0}.rounded-right{border-radius:0 3px 3px 0}.rounded-bottom{border-radius:0 0 3px 3px}.rounded-left{border-radius:3px 0 0 3px}.not-rounded{border-radius:0}.black{color:#111}.gray{color:#aaa}.silver{color:#ddd}.white{color:#fff}.aqua{color:#7fdbff}.blue{color:#0074d9}.navy{color:#001f3f}.teal{color:#39cccc}.green{color:#2ecc40}.olive{color:#3d9970}.lime{color:#01ff70}.yellow{color:#ffdc00}.orange{color:#ff851b}.red{color:#ff4136}.fuchsia{color:#f012be}.purple{color:#b10dc9}.maroon{color:#85144b}.color-inherit{color:inherit}.muted{opacity:.5}.bg-black{background-color:#111}.bg-gray{background-color:#aaa}.bg-silver{background-color:#ddd}.bg-white{background-color:#fff}.bg-aqua{background-color:#7fdbff}.bg-blue{background-color:#0074d9}.bg-navy{background-color:#001f3f}.bg-teal{background-color:#39cccc}.bg-green{background-color:#2ecc40}.bg-olive{background-color:#3d9970}.bg-lime{background-color:#01ff70}.bg-yellow{background-color:#ffdc00}.bg-orange{background-color:#ff851b}.bg-red{background-color:#ff4136}.bg-fuchsia{background-color:#f012be}.bg-purple{background-color:#b10dc9}.bg-maroon{background-color:#85144b}.bg-darken-1{background-color:rgba(0,0,0,.0625)}.bg-darken-2{background-color:rgba(0,0,0,.125)}.bg-darken-3{background-color:rgba(0,0,0,.25)}.bg-darken-4{background-color:rgba(0,0,0,.5)}.bg-lighten-1{background-color:rgba(255,255,255,.0625)}.bg-lighten-2{background-color:rgba(255,255,255,.125)}.bg-lighten-3{background-color:rgba(255,255,255,.25)}.bg-lighten-4{background-color:rgba(255,255,255,.5)}</style>
</head>
<body>
<div class='container'>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0000.png' /></div>
    <div class="col lg-col-6"><div class='px2'>follow allong at geo.rodeo<br>on a side note, if the organizers of the geo rodeo would like this domain for next year, talk to me after</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0001.png' /></div>
    <div class="col lg-col-6"><div class='px2'>hello my name is Calvin Metcalf</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0002.png' /></div>
    <div class="col lg-col-6"><div class='px2'>I work for AppGeo<br>You might know me from such projects as</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0003.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Proj4JS</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0004.png' /></div>
    <div class="col lg-col-6"><div class='px2'>parsing things in js that should't be</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0005.png' /></div>
    <div class="col lg-col-6"><div class='px2'>this is a cartodb query builder for node.js this one you should know about if you don't</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0006.png' /></div>
    <div class="col lg-col-6"><div class='px2'>I did not create topojson, I suspect this was a trick to get me to say the name of the creator.<br>I did create a python port and helped write the spec</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0007.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Mike Bostock did, go a head and cross that one off</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0008.png' /></div>
    <div class="col lg-col-6"><div class='px2'>today we're talking about my favorite app</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0009.png' /></div>
    <div class="col lg-col-6"><div class='px2'>I hope you never see</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0010.png' /></div>
    <div class="col lg-col-6"><div class='px2'>my company AppGeo traditionally has done apps for governmental agencies and local government<br>These apps, especially local government ones, have some hard caps on the number of users</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0011.png' /></div>
    <div class="col lg-col-6"><div class='px2'>In other words, scaling is not an issue we usually have to deal with<br>This is not the case with drivetexas.org<br>which you might even have used to get here<br>We had well over 100 thousand hits on april 18th of this year</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0012.png' /></div>
    <div class="col lg-col-6"><div class='px2'>the data on drivetexas can also change rapidly</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0013.png' /></div>
    <div class="col lg-col-6"><div class='px2'>And the data tends to change most rapidly when people are using it the most due to secondary delays and accidents or county wide conditions that are applied to all (state) roads in the county</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0014.png' /></div>
    <div class="col lg-col-6"><div class='px2'>The gist of the drivetexas is that txdot has conditions in a esri feature service with traffic conditions like accidents and construction which it needs displayed on a map that will work even if 100,000 people use it.<br>we came in to replace a solution based on some compay's tech that didn't work, not shocking since some company often has trouble with 'the web'</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0015.png' /></div>
    <div class="col lg-col-6"><div class='px2'>This originally ran on a Google product</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0016.png' /></div>
    <div class="col lg-col-6"><div class='px2'>called maps engine (GME) which has now been discontinued.  The site now runs on</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0017.png' /></div>
    <div class="col lg-col-6"><div class='px2'>A product called Maplarge which you probably havn't heard of as most of the previous work was with the DOD and is thus classified<br>GME was very temperamental</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0018.png' /></div>
    <div class="col lg-col-6"><div class='px2'>and broke a couple times including once when I was on my honeymoon</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0019.png' /></div>
    <div class="col lg-col-6"><div class='px2'>which thankfully others were able to solve, and another time on a weekend and I ended up having to diagnose problems with google engineers and write a patch from a balcony of a party I was at … a party thrown by a friend of my wife.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0020.png' /></div>
    <div class="col lg-col-6"><div class='px2'>it was decided we would make a 2nd version of drivetexas</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0021.png' /></div>
    <div class="col lg-col-6"><div class='px2'>it would run on completely separate infrastructure, in this case amazon instead of google</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0022.png' /></div>
    <div class="col lg-col-6"><div class='px2'>it would be as self contained as possible no external dependencies if possible</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0023.png' /></div>
    <div class="col lg-col-6"><div class='px2'>It would be as simple as possible, both in the sense that it would only have the features it absolutely needed to get the job done and in the sense of avoiding having much of a backend to handle serving requests.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0024.png' /></div>
    <div class="col lg-col-6"><div class='px2'>so in case of the main site breaking we could flip a switch and activate that one</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0025.png' /></div>
    <div class="col lg-col-6"><div class='px2'>My idea was to use mapnik to generate a pyramid of tiles, both images, and utf grids to provide interaction.  We’d create the tile and then upload them to s3.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0026.png' /></div>
    <div class="col lg-col-6"><div class='px2'>This was surprisingly snappy, so we were able to tile it to level 11 every 5 minutes instead of level 10 every 10 minutes as originally planned.<br>I’d used tilelive to generate tiles for with mapnik for an app before so I just copied my same setup.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0027.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Tilelive is mapboxes all encompassing framework for working with tiles with various backends, it has minimal documentation so even though I knew in theory I could use it to upload to s3 I didn’t want to mess with that.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0028.png' /></div>
    <div class="col lg-col-6"><div class='px2'>The final setup ended up being that we’d download the data from both the line and point endpoints (This is esri remember).  To make sure that more serious accidents were always on top of less serious ones, so accident is above construction, we just sorted the data before writing it as a geojson because mapnik just uses the ‘painter's algorithm’ which just means latter things go on top of previous things.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0029.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Once I had a proof of concept that mapnik and s3 would be viable then it came to creating the actual webapp.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0030.png' /></div>
    <div class="col lg-col-6"><div class='px2'>The app was being stripped to its bare essentials.  Namely it would always show all current conditions, so we would remove the ability to toggle off condition types, the ability to switch over to viewing planned construction, the ability to do searches, to plan routes, and to view other interesting layers.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0031.png' /></div>
    <div class="col lg-col-6"><div class='px2'>If multiple conditions were located at the same location, we’d only show the one that was ‘on top’ based on the condition sorting, unlike the main one which showed them all.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0032.png' /></div>
    <div class="col lg-col-6"><div class='px2'>The legend does have to show only those types of conditions that are present on the map, i.e. if there is no snow on the map, don’t show it on the legend.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0033.png' /></div>
    <div class="col lg-col-6"><div class='px2'>We use leaflet for the map, along with the very nice utf grid plugin plus use leaflet.hash and a modified version of the legend plugin from mapbox.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0034.png' /></div>
    <div class="col lg-col-6"><div class='px2'>The way we end up doing it is that each time it runs, the tiles go into a new folder.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0035.png' /></div>
    <div class="col lg-col-6"><div class='px2'>We set the cache-control attributes on the tiles so that browsers would cache them for a year</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0036.png' /></div>
    <div class="col lg-col-6"><div class='px2'>We have a mustache template for the index page and when we are done uploading the tiles we use the template to set which of the legend items are visible, the new path to the tiles, and the updated date.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0037.png' /></div>
    <div class="col lg-col-6"><div class='px2'>To ensure that the client sees the most up to date version of it, we use the super fancy meta refresh tag.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0038.png' /></div>
    <div class="col lg-col-6"><div class='px2'>We use amazon cloudfront to allow us to have multiple subdomains point to the same file</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0039.png' /></div>
    <div class="col lg-col-6"><div class='px2'>I setup a cron job to run this every 5 minutes and everything is great</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0040.png' /></div>
    <div class="col lg-col-6"><div class='px2'>For a month then all company email</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0041.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Out s3 usage spiked 2 orders of magnitude last month anybody know whats happening ?</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0042.png' /></div>
    <div class="col lg-col-6"><div class='px2'>That was my bad.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0043.png' /></div>
    <div class="col lg-col-6"><div class='px2'>I added a test for blank tiles and utf grids ends up filtering out like 90% plus</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0044.png' /></div>
    <div class="col lg-col-6"><div class='px2'>At this point we also realized that the background tiles I had copied into our s3 bucket for development were going to be a no go production due to flagrantly violating the mapbox terms of service.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0045.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Since the client wanted a few changes anyway I figured I could just tile it based on the output of mapbox studio classic, how hard could that be</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0046.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Very fraking hard</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0047.png' /></div>
    <div class="col lg-col-6"><div class='px2'>Thankfully Seth Fitzsimmons aka mojodna from stamen had figured out how and I was able to create my own mapbox-streets like tiles that could be in my own s3 bucket and wouldn’t go down if mapbox went down</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0048.png' /></div>
    <div class="col lg-col-6"><div class='px2'>And the last thing was redirecting users to the static map if drivetexas went down and back when it went up, done using this new fangled technology called ‘DNS’.</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0049.png' /></div>
    <div class="col lg-col-6"><div class='px2'>and thats how it works</div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0050.png' /></div>
    <div class="col lg-col-6"><div class='px2'></div></div>
  </div>
  <div class="clearfix py2">
    <div class="col lg-col-6"><img class='border' src='images/page-0051.png' /></div>
    <div class="col lg-col-6"><div class='px2'>maybe do awards ceremony for bingo?</div></div>
  </div>
</div>
</body>
